{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BCMS</title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <link href="//fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="{% static 'css/bcms.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


   <script>
      $(function(){
        $('.middle').bind('load', function(){
          var parentwidth = parseFloat($('.middle').parent().css("width"));
          var thiswidth = parseFloat($('.middle').css("width"));
          $('.middle').css({"margin-left": (parentwidth-thiswidth)/2 + "px"});
        });
        $('.middle').trigger('load');

        $('#logo').bind('load', function(){
          var parentwidth = parseFloat($('#logo').parent().css("width"));
          var thiswidth = parseFloat($('#logo').css("width"));
          $('#logo').css({"margin-left": (parentwidth-thiswidth)/2 + "px"});
        });
        $('#logo').trigger('load');
      });

      $(function(){
        $('#whiteboard').css({"border-radius": parseFloat($('#whiteboard').css("width")) / 50 + "px"});
        $('#wboard').css({"border-radius": parseFloat($('#wboard').css("width")) / 50 + "px"});
      });

      $(function(){
        $('#logo').animate({opacity: "1"}, 3000);
      });

      $(function(){
        $("#not1_content").text("북일고등학교에 새로 입학하는 1학년 학생들은 1학기 초반에 학교의 시설에 대하여 자세하게 알지 못합니다. 또한 북일고등학교의 학생들이 자주 이용하는 외부 시설 등에 대해서는 더더욱 잘 알지 못합니다. BCMS는 이에 대한 해결책을 제공하기 위해 개발되었습니다. 교내에서 문제가 발생했을 때 즉각적으로 언제 어디에서 무슨 문제점이 발생했는지 BCMS에 기록하시고 다른 학생들에게 공유하실 수 있습니다. 교외에 새로 생긴 좋은 식당이나 시설 등을 다른 학생들에게 쉽게 알릴 수 있습니다. BCMS는 여러분들의 삶 속에서 불편한 점을 해소하고 더욱 윤택한 삶을 위해 개발되었습니다. BCMS가 더욱 큰 효과를 발휘하기 위해서는 여러분들의 참여가 반드시 필요합니다. 많은 이용 부탁드립니다.");
        $("#not1").on("click", function(){
          $("#not1_content").animate({width: "toggle", height: "toggle", margin: "toggle", padding: "toggle"}, 1000);
        });
        $("#not1").trigger("click");
        $("#not2_content").text("BCMS는 뉴스피드 기능과 커뮤니티 매핑 기능을 제공합니다.\n뉴스피드 기능은 바로 이 공지사항 아래에 나오는 것인데요. 신입생에게 해주고싶은 말이나 신입생이 선배들에게 밝히는 포부 등을 적어주시면 됩니다.\n커뮤니티 매핑 기능은 저 위에 '커뮤니티 매핑' 버튼을 눌러 이용하실 수 있습니다. 지도 위에 찍힌 마커는 각각 그 위치에 어떤 사용자가 추가한 정보를 의미합니다. 마커를 클릭하시면 정보를 보실 수 있습니다. 새로운 마커를 찍는 법은 매우 간단합니다. 마커가 없는 곳을 클릭하시면 저장하시려는 정보를 입력할 수 있는 창이 나타납니다. 모두 작성하신 후 저장 버튼을 눌러주시면 입력하신 정보가 서버에 저장됩니다. 자, 그러면 많은 이용 부탁드립니다.");
        $("#not2").on("click", function(){
          $("#not2_content").animate({width: "toggle", height: "toggle", margin: "toggle", padding: "toggle"}, 1000);
        });
        $("#not2").trigger("click");
      });

      $(document).ready(function(){
        $(window).resize(function(){
          $("#logo").trigger('load');
          $(".middle").trigger("load");
        });
      });
    </script>
</head>
<body id="home">
        {% if user.is_authenticated %}
            <a href="{% url 'post_new' %}" class="top-menu"><span class="glyphicon glyphicon-plus"></span></a>
            <a href="{% url 'post_draft_list' %}" class="top-menu"><span class="glyphicon glyphicon-edit"></span></a>
            <p class="top-menu">Hello {{ user.username }} <small>(<a href="{% url 'logout' %}">Log out</a>)</small></p>
        {% else %}
            <a href="{% url 'login' %}" class="top-menu"><span class="glyphicon glyphicon-lock"></span></a>
        {% endif %}
            <h1 style="margin-left: 20px;"><a href="/">Bugil Community Mapping System</a></h1>

        <div style="margin-top: 100px; width: 100%; height: 400px;">
          <div style="width: 33%; float: left; height: auto;">
            <font class="title_font">커뮤니티 매핑</font>
                <div class="middle">
                    <a href="/map"><img class="button" src="https://i.imgur.com/HQenKUt.png"></a>
                </div>
          </div>
          <div style="width: 34%; float: left; height: auto;">
            <img id="logo" src="https://i.imgur.com/gi9uPMy.png">
              <font id="slogan" class="title_font">함께 만들어가는 북일</font>
          </div>
          <div style="width: 33%; float: left; height: auto;">
            <font class="title_font">건의사항</font>
            <div class="middle">
              <a href="/suggest"><img class="button" src="https://i.imgur.com/moSPbma.png"></a>
            </div>
          </div>
        </div>

        <div id="whiteboard">
            <h2>공지사항</h2>
            <h4>클릭하여 세부 내용을 보실 수 있습니다</h4>
            <div id="not1" class="notice">BCMS를 개발한 목적<div id="not1_content" class="notice"></div></div>
            <div id="not2" class="notice">BCMS를 사용하는 법<div id="not2_content" class="notice"></div></div>
        </div>

        <div id="wboard">
            <a href="{% url 'post_new' %}" class="top-menu"><span class="glyphicon glyphicon-plus"></span></a>
            <h2>자유로운 게시판!!!</h2>

            {% for post in posts %}
                <div class="post_board">
                    <div class="post">
                        <div class="date">
                            {{ post.published_date }}
                        </div>
                        <h1><a href="{% url 'post_detail' pk=post.pk %}">{{ post.text }}</a></h1>
                        <p>{{ post.text|linebreaksbr }}</p>
                    </div>
                        <a href="{% url 'post_detail' pk=post.pk %}">댓글: {{ post.comments.count }}개</a>
                        <a href="{% url 'post_like' pk=post.pk %}">{{ post.like_user_set.count }} like{{ post.like_user_set.count|pluralize }}</a>
                        {% for like_user in post.like_user_set.all %}
                            {{ like_user.profile.nickname }}
                        {% endfor %}
                </div>
            {% endfor %}
        </div>


</body>

<footer>
    <font class="dev_info">Copyright(C)2019 by Team Banada | 류동환(DongWhan Ryu) : 총괄(Manager), 백엔드(Back End), 데이터베이스(DB), 서버 관리(Server) | 김민재(KimGoon / Minjae Kim) : 프론트엔드(Front End), 디자인(Designer)</font>
</footer>

</html>